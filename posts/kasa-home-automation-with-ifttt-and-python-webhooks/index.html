<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Kasa home automation with IFTTT and python webhooks | ExitCode0</title>
<meta name=keywords content="homeautomation,IFTTT,python,webhooks"><meta name=description content="They say that the long tail page titles are best for SEO, well this one certainly should be up there with the best of them. In this post, I am going to explain how easy it is to control Kasa a HS100 / HS110 with IFTTT and python webhooks. Using this basic code, you expand into building a very powerful home automation system which fits your needs and take your Kasa home automation to the next level."><meta name=author content="Tom"><link rel=canonical href=https://exitcode0.net/posts/kasa-home-automation-with-ifttt-and-python-webhooks/><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://exitcode0.net/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://exitcode0.net/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://exitcode0.net/favicon-32x32.png><link rel=apple-touch-icon href=https://exitcode0.net/apple-touch-icon.png><link rel=mask-icon href=https://exitcode0.net/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://exitcode0.net/posts/kasa-home-automation-with-ifttt-and-python-webhooks/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7745507566538945" crossorigin=anonymous></script><script data-name=BMC-Widget data-cfasync=false src=https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js data-id=exit data-description="Support me on Buy me a coffee!" data-message="Buy me a coffee" data-color=#FF813F data-position=Right data-x_margin=18 data-y_margin=165></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-EDE9MPZR9T"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-EDE9MPZR9T")}</script><meta property="og:title" content="Kasa home automation with IFTTT and python webhooks"><meta property="og:description" content="They say that the long tail page titles are best for SEO, well this one certainly should be up there with the best of them. In this post, I am going to explain how easy it is to control Kasa a HS100 / HS110 with IFTTT and python webhooks. Using this basic code, you expand into building a very powerful home automation system which fits your needs and take your Kasa home automation to the next level."><meta property="og:type" content="article"><meta property="og:url" content="https://exitcode0.net/posts/kasa-home-automation-with-ifttt-and-python-webhooks/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-12-04T09:00:00+00:00"><meta property="article:modified_time" content="2019-12-04T09:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Kasa home automation with IFTTT and python webhooks"><meta name=twitter:description content="They say that the long tail page titles are best for SEO, well this one certainly should be up there with the best of them. In this post, I am going to explain how easy it is to control Kasa a HS100 / HS110 with IFTTT and python webhooks. Using this basic code, you expand into building a very powerful home automation system which fits your needs and take your Kasa home automation to the next level."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://exitcode0.net/posts/"},{"@type":"ListItem","position":2,"name":"Kasa home automation with IFTTT and python webhooks","item":"https://exitcode0.net/posts/kasa-home-automation-with-ifttt-and-python-webhooks/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Kasa home automation with IFTTT and python webhooks","name":"Kasa home automation with IFTTT and python webhooks","description":"They say that the long tail page titles are best for SEO, well this one certainly should be up there with the best of them. In this post, I am going to explain how easy it is to control Kasa a HS100 / HS110 with IFTTT and python webhooks. Using this basic code, you expand into building a very powerful home automation system which fits your needs and take your Kasa home automation to the next level.\n","keywords":["homeautomation","IFTTT","python","webhooks"],"articleBody":"They say that the long tail page titles are best for SEO, well this one certainly should be up there with the best of them. In this post, I am going to explain how easy it is to control Kasa a HS100 / HS110 with IFTTT and python webhooks. Using this basic code, you expand into building a very powerful home automation system which fits your needs and take your Kasa home automation to the next level.\nKasa HS100 / HS110 Introduction HS100 (UK Version) Kasa is the home automation/ smart device brand offered by TP-Link. Their products office a great deal of functionality out of the box, allowing you to control a device smart plug/bulb from your phone without the need for a controller – such as the Philips hue systems. This is achieved using a cloud-hosted API model; every device communicates to/from the Kasa cloud-hosted backend. Every Kasa device is registered to your account.\nIFTTT Webhooks Introduction If This Then That (IFTTT) – is a free web-based service to create chains of simple conditional statements, called applets. An applet is triggered by changes that occur within other web services such as Gmail, Facebook, Telegram, Instagram, or Pinterest.\nYou must first activate the webhook service, then you can acquire your webhook URL.\nFind you webhook URL https://ifttt.com/maker_webhooks/settings\nBuild a webhook trigger Next, you need to build a trigger. In the case of a HS100/HS110, it would be sensible to build two triggers – on and off triggers. As you will see later in the code, the Event Name value is passed to IFTTT in our webhook URL; make this unique to each webhook trigger.\nKasa home automation with python Finally, it is time to write to some code – at last. This part is arguably less fiddly than the prerequisite setup for this project. As previously mentioned, this code contains my unique IFTTT trigger URL so I will be obfuscating some sensitive data to prevent everyone from turning my Kasa plug on and off.\n#!/usr/bin/python import requests def funcHSTon (): requests.post(\"https://maker.ifttt.com/trigger/temp_low/with/key/\") def funcHSToff (): requests.post(\"https://maker.ifttt.com/trigger/temp_high/with/key/\") #funcHSToff() funcHSTon() I have split both webhook triggers into two functions – funcHSTon \u0026 funcHSToff – and I have commented out the function that I don’t want to run during testing.\nRemember to replace ‘’ with your own key!\nBest of luck with the never ending story of home automation with python!\nOther useful posts: Ubuntu 19.10 – How to upgrade python 2.7 to python 3.7 – https://exitcode0.net/ubuntu-19-10-how-to-upgrade-python-2-7-to-python-3-7/ Debian 9 – How to upgrade python 3.5 to python 3.7 – https://exitcode0.net/posts/debian-9-how-to-upgrade-python-3-5-to-python-3-7/ ","wordCount":"431","inLanguage":"en","datePublished":"2019-12-04T09:00:00Z","dateModified":"2019-12-04T09:00:00Z","author":{"@type":"Person","name":"Tom"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://exitcode0.net/posts/kasa-home-automation-with-ifttt-and-python-webhooks/"},"publisher":{"@type":"Organization","name":"ExitCode0","logo":{"@type":"ImageObject","url":"https://exitcode0.net/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://exitcode0.net/ accesskey=h title="ExitCode0 (Alt + H)">ExitCode0</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://datasolace.com/ title=DataSolace><span>DataSolace</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://exitcode0.net/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://exitcode0.net/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://exitcode0.net/privacy/ title=Privacy><span>Privacy</span></a></li><li><a href=https://exitcode0.net/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://exitcode0.net/>Home</a>&nbsp;»&nbsp;<a href=https://exitcode0.net/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Kasa home automation with IFTTT and python webhooks</h1><div class=post-meta><span title='2019-12-04 09:00:00 +0000 UTC'>December 4, 2019</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Tom</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#kasa-hs100--hs110-introduction aria-label="Kasa HS100 / HS110 Introduction">Kasa HS100 / HS110 Introduction</a></li><li><a href=#ifttt-webhooks-introduction aria-label="IFTTT Webhooks Introduction">IFTTT Webhooks Introduction</a><ul><li><a href=#find-you-webhook-url aria-label="Find you webhook URL">Find you webhook URL</a></li><li><a href=#build-a-webhook-trigger aria-label="Build a webhook trigger">Build a webhook trigger</a></li></ul></li><li><a href=#kasa-home-automation-with-python aria-label="Kasa home automation with python">Kasa home automation with python</a></li><li><a href=#other-useful-posts aria-label="Other useful posts:">Other useful posts:</a></li></ul></div></details></div><div class=post-content><p>They say that the long tail page titles are best for SEO, well this one certainly should be up there with the best of them. In this post, I am going to explain how easy it is to control Kasa a HS100 / HS110 with IFTTT and python webhooks. Using this basic code, you expand into building a very powerful home automation system which fits your needs and take your Kasa home automation to the next level.</p><h2 id=kasa-hs100--hs110-introduction>Kasa HS100 / HS110 Introduction<a hidden class=anchor aria-hidden=true href=#kasa-hs100--hs110-introduction>#</a></h2><p><img loading=lazy src="https://i2.wp.com/exitcode0.net/wp-content/uploads/2019/12/HS100UK-L_normal_1537151506685r.png?resize=177%2C177&amp;ssl=1" alt="Kasa home automation HS100">
HS100 (UK Version)
Kasa is the home automation/ smart device brand offered by TP-Link. Their products office a great deal of functionality out of the box, allowing you to control a device smart plug/bulb from your phone without the need for a controller – such as the Philips hue systems. This is achieved using a cloud-hosted API model; every device communicates to/from the Kasa cloud-hosted backend. Every Kasa device is registered to your account.</p><hr><h2 id=ifttt-webhooks-introduction>IFTTT Webhooks Introduction<a hidden class=anchor aria-hidden=true href=#ifttt-webhooks-introduction>#</a></h2><p>If This Then That (IFTTT) – is a free web-based service to create chains of simple conditional statements, called applets. An applet is triggered by changes that occur within other web services such as Gmail, Facebook, Telegram, Instagram, or Pinterest.</p><p>You must first activate the webhook service, then you can acquire your webhook URL.</p><h3 id=find-you-webhook-url>Find you webhook URL<a hidden class=anchor aria-hidden=true href=#find-you-webhook-url>#</a></h3><p><a href=https://ifttt.com/maker_webhooks/settings title=https://ifttt.com/maker_webhooks/settings>https://ifttt.com/maker_webhooks/settings</a></p><p><img loading=lazy src="https://i1.wp.com/exitcode0.net/wp-content/uploads/2019/12/webhook_settings-1.png?resize=774%2C230&amp;ssl=1" alt="Kasa home automation -  IFTTT webhooks"></p><h3 id=build-a-webhook-trigger>Build a webhook trigger<a hidden class=anchor aria-hidden=true href=#build-a-webhook-trigger>#</a></h3><p>Next, you need to build a trigger. In the case of a HS100/HS110, it would be sensible to build two triggers – on and off triggers. As you will see later in the code, the Event Name value is passed to IFTTT in our webhook URL; <strong>make this unique to each webhook trigger.</strong></p><p><img loading=lazy src="https://i1.wp.com/exitcode0.net/wp-content/uploads/2019/12/webhook_trigger.png?resize=505%2C543&amp;ssl=1" alt="Kasa home automation - IFTTT webhook triggers"></p><hr><h2 id=kasa-home-automation-with-python>Kasa home automation with python<a hidden class=anchor aria-hidden=true href=#kasa-home-automation-with-python>#</a></h2><p>Finally, it is time to write to some code – at last. This part is arguably less fiddly than the prerequisite setup for this project. As previously mentioned, this code contains my unique IFTTT trigger URL so I will be obfuscating some sensitive data to prevent everyone from turning my Kasa plug on and off.</p><pre tabindex=0><code>#!/usr/bin/python

import requests

def funcHSTon ():
 requests.post(&#34;https://maker.ifttt.com/trigger/temp_low/with/key/&lt;your webhook key&gt;&#34;)

def funcHSToff ():
 requests.post(&#34;https://maker.ifttt.com/trigger/temp_high/with/key/&lt;your webhook key&gt;&#34;)

#funcHSToff()
funcHSTon()
</code></pre><p>I have split both webhook triggers into two functions – funcHSTon & funcHSToff – and I have commented out the function that I don’t want to run during testing.<br><strong>Remember to replace ‘’ with your own key!</strong></p><p><img loading=lazy src="https://i0.wp.com/exitcode0.net/wp-content/uploads/2019/12/neverending-python-story.png?fit=760%2C422&amp;ssl=1" alt>
Best of luck with the never ending story of home automation with python!</p><hr><h2 id=other-useful-posts>Other useful posts:<a hidden class=anchor aria-hidden=true href=#other-useful-posts>#</a></h2><ul><li><strong>Ubuntu 19.10 – How to upgrade python 2.7 to python 3.7</strong> – <a href=https://exitcode0.net/ubuntu-19-10-how-to-upgrade-python-2-7-to-python-3-7/ title=https://exitcode0.net/ubuntu-19-10-how-to-upgrade-python-2-7-to-python-3-7/>https://exitcode0.net/ubuntu-19-10-how-to-upgrade-python-2-7-to-python-3-7/</a></li><li><strong>Debian 9 – How to upgrade python 3.5 to python 3.7</strong> – <a href=https://exitcode0.net/posts/debian-9-how-to-upgrade-python-3-5-to-python-3-7/ title=https://exitcode0.net/posts/debian-9-how-to-upgrade-python-3-5-to-python-3-7/>https://exitcode0.net/posts/debian-9-how-to-upgrade-python-3-5-to-python-3-7/</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://exitcode0.net/tags/homeautomation/>Homeautomation</a></li><li><a href=https://exitcode0.net/tags/ifttt/>IFTTT</a></li><li><a href=https://exitcode0.net/tags/python/>Python</a></li><li><a href=https://exitcode0.net/tags/webhooks/>Webhooks</a></li></ul><nav class=paginav><a class=prev href=https://exitcode0.net/posts/python-2-7-end-of-life-the-time-to-upgrade-is-upon-us/><span class=title>« Prev</span><br><span>Python 2.7 end-of-life - The time to upgrade is upon us</span>
</a><a class=next href=https://exitcode0.net/posts/awus036ac-rt8812au-driver-setup-in-kali-linux/><span class=title>Next »</span><br><span>AWUS036AC (rtl8812au) driver setup in Kali Linux</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://exitcode0.net/>ExitCode0</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>