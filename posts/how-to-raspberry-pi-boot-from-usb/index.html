<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>How To: Raspberry Pi boot from USB | ExitCode0</title>
<meta name=keywords content="Linux,Pi4,raspberry pi"><meta name=description content="The Pi enthusiasts have been waiting for official USB boot support on the Raspberry Pi for what feels like a lifetime, but finally it is on the horizon. In this post I will explain how to make your Raspberry Pi boot from USB.


WARNING: Although this is official, it is still in beta testing, so rock-solid stability is far from certain. Learn more about this beta release here."><meta name=author content="Tom"><link rel=canonical href=https://exitcode0.net/posts/how-to-raspberry-pi-boot-from-usb/><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://exitcode0.net/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://exitcode0.net/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://exitcode0.net/favicon-32x32.png><link rel=apple-touch-icon href=https://exitcode0.net/apple-touch-icon.png><link rel=mask-icon href=https://exitcode0.net/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://exitcode0.net/posts/how-to-raspberry-pi-boot-from-usb/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7745507566538945" crossorigin=anonymous></script><script data-name=BMC-Widget data-cfasync=false src=https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js data-id=exit data-description="Support me on Buy me a coffee!" data-message="Buy me a coffee" data-color=#FF813F data-position=Right data-x_margin=18 data-y_margin=165></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-EDE9MPZR9T"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-EDE9MPZR9T")}</script><meta property="og:title" content="How To: Raspberry Pi boot from USB"><meta property="og:description" content="The Pi enthusiasts have been waiting for official USB boot support on the Raspberry Pi for what feels like a lifetime, but finally it is on the horizon. In this post I will explain how to make your Raspberry Pi boot from USB.


WARNING: Although this is official, it is still in beta testing, so rock-solid stability is far from certain. Learn more about this beta release here."><meta property="og:type" content="article"><meta property="og:url" content="https://exitcode0.net/posts/how-to-raspberry-pi-boot-from-usb/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-05-23T10:31:45+00:00"><meta property="article:modified_time" content="2020-05-23T10:31:45+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="How To: Raspberry Pi boot from USB"><meta name=twitter:description content="The Pi enthusiasts have been waiting for official USB boot support on the Raspberry Pi for what feels like a lifetime, but finally it is on the horizon. In this post I will explain how to make your Raspberry Pi boot from USB.


WARNING: Although this is official, it is still in beta testing, so rock-solid stability is far from certain. Learn more about this beta release here."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://exitcode0.net/posts/"},{"@type":"ListItem","position":2,"name":"How To: Raspberry Pi boot from USB","item":"https://exitcode0.net/posts/how-to-raspberry-pi-boot-from-usb/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"How To: Raspberry Pi boot from USB","name":"How To: Raspberry Pi boot from USB","description":"The Pi enthusiasts have been waiting for official USB boot support on the Raspberry Pi for what feels like a lifetime, but finally it is on the horizon. In this post I will explain how to make your Raspberry Pi boot from USB.\nWARNING: Although this is official, it is still in beta testing, so rock-solid stability is far from certain. Learn more about this beta release here.\n","keywords":["Linux","Pi4","raspberry pi"],"articleBody":"The Pi enthusiasts have been waiting for official USB boot support on the Raspberry Pi for what feels like a lifetime, but finally it is on the horizon. In this post I will explain how to make your Raspberry Pi boot from USB.\nWARNING: Although this is official, it is still in beta testing, so rock-solid stability is far from certain. Learn more about this beta release here.\nWhy should I make my Raspberry Pi boot from USB? Firstly let me address why you would want to do this and what makes many people relieved that the feature is on the horizon.\nA more robust, long-lasting boot device. Micro SD cards, particularly high-quality cards, have come a long way and the days of a dead micro SD card seem to be dwindling. However, the small flash cards have a much shorter read/write life expectancy, and are not really designed to be used as a bootable OS media. Being able to use a SATA (over USB) device which was designed for the typical IO expected from an active operating system will ensure a long-lasting Pi setup.\n32GB Sandisk Card Price over time – Camel Camel Camel SATA based storage is cheaper per GB. Prices of micro SD cards have dropped significantly over the years, but SATA based storage is till better value for money at larger capacities, as well as the reliability benefits.\nHow do I make my Raspberry Pi boot from USB? Difficulty: Medium\nThere are a number of steps involved in this process and it will require you to bounce some files between devices that can be done on the Pi or by connecting the two bootable devices to another computer – this method won’t be covered in this guide.\nRequirements: Raspberry Pi https://amzn.to/3eiF2XT Pi 4 Starter kit The latest version of Raspbian Buster https://www.raspberrypi.org/downloads/raspbian/ USB hard drive/flash drive https://amzn.to/2Twk4wm 256GB Sandisk USB drive. Micro SD Card (still required at this point in BETA) https://amzn.to/3ggknoX 32GB SanDisk Micro SD card Burn the Rasbian ISO to your SD card using something like Etcher: https://www.balena.io/etcher/ and plug it into the Pi.\nProcess (as of 23-05-2020): The breakdown of the process:\nChange the content of the EEPROM on the Raspberry Pi4 and set the boot device to USB. Copy files from the boot directory of the SD card to the boot directory of the USB boot device. We must start by updating the Raspbian installation:\nsudo apt update -y \u0026\u0026 sudo apt upgrade -y \u0026\u0026 sudo rpi-update -y Now that we are up to date, we must reboot before installing rpi-eeprom:\nsudo reboot now sudo apt install rpi-eeprom Now we have to change the path of the Pi’s EEPROM firmware- this is done by moving from the critical channel to beta channel:\nsudo nano /etc/default/rpi-eeprom-update Replace ‘critical‘ with ‘beta‘ followed by ‘ctrl+x, y‘ to save and exit.\nNow we can program the EEPROM as follows:\nsudo rpi-eeprom-update -d -f /lib/firmware/raspberrypi/bootloader/beta/pieeprom-2020-05-15.bin Followed by a reboot:\nsudo reboot now Once the reboot is complete, we can check the bootloader version as follows:\nvcgencmd bootloader_version If we run the follow…\nvcgencmd bootloader_config … we should see ‘BOOTORDER=0xF41. 4‘\n‘.4’ means that USB boot is active; ‘.1’ means that SD boot is active.\nAt this point the Pi is ready, but the USB media is not. All that is left is to prepare the USB bootable media with the necessary files form our SD card installation.\nStart by plugging in the USB getting rasbian flashed to your USB device in the same manner as the SD card – personally I use Etchor: https://www.balena.io/etcher/\nNow we need to copy all ‘.elf’ and ‘.dat’ files from the boot directory of our SD card to the boot directory on the USB. Let’s start by mounting the USB drive.\nsudo mkdir /mnt/usbdisk sudo mount /dev/sd1 /mnt/usbdisk Now that the USB drive is mounted, we can copy the required files:\nsudo cp /boot/*.elf /mnt/usbdisk sudo cp /boot/*.dat /mnt/usbdisk We are done!\nNow we can now power down (sudo shutdown now), remove the SD card, then power back up and check that we have successfully booted from out USB!\nMore Raspberry Pi Antics: [SOLVED] – RUNNING DOCKER ON A RASPBERRY PI 4 – https://exitcode0.net/posts/solved-running-docker-on-a-raspberry-pi-4/ USING A DHT11 SENSOR WITH A RASPBERRY PI – https://exitcode0.net/using-a-dht11-sensor-with-a-raspberry-pi/ CREATING A LOCAL DNS SERVER WITH PI HOLE – https://exitcode0.net/creating-a-local-dns-server-with-pi-hole/ ","wordCount":"722","inLanguage":"en","datePublished":"2020-05-23T10:31:45Z","dateModified":"2020-05-23T10:31:45Z","author":{"@type":"Person","name":"Tom"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://exitcode0.net/posts/how-to-raspberry-pi-boot-from-usb/"},"publisher":{"@type":"Organization","name":"ExitCode0","logo":{"@type":"ImageObject","url":"https://exitcode0.net/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://exitcode0.net/ accesskey=h title="ExitCode0 (Alt + H)">ExitCode0</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://datasolace.com/ title=DataSolace><span>DataSolace</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://exitcode0.net/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://exitcode0.net/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://exitcode0.net/privacy/ title=Privacy><span>Privacy</span></a></li><li><a href=https://exitcode0.net/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://exitcode0.net/>Home</a>&nbsp;»&nbsp;<a href=https://exitcode0.net/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">How To: Raspberry Pi boot from USB</h1><div class=post-meta><span title='2020-05-23 10:31:45 +0000 UTC'>May 23, 2020</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Tom</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#why-should-i-make-my-raspberry-pi-boot-from-usb aria-label="Why should I make my Raspberry Pi boot from USB?">Why should I make my Raspberry Pi boot from USB?</a></li><li><a href=#how-do-i-make-my-raspberry-pi-boot-from-usb aria-label="How do I make my Raspberry Pi boot from USB?">How do I make my Raspberry Pi boot from USB?</a><ul><ul><li><a href=#difficulty aria-label=Difficulty:>Difficulty:</a></li><li><a href=#requirements aria-label=Requirements:>Requirements:</a></li><li><a href=#process-as-of-23-05-2020 aria-label="Process (as of 23-05-2020):">Process (as of 23-05-2020):</a></li></ul></ul></li><li><a href=#more-raspberry-pi-antics aria-label="More Raspberry Pi Antics:">More Raspberry Pi Antics:</a></li></ul></div></details></div><div class=post-content><p>The Pi enthusiasts have been waiting for official USB boot support on the Raspberry Pi for what feels like a lifetime, but finally it is on the horizon. In this post I will explain how to make your Raspberry Pi boot from USB.</p><p><img loading=lazy src="https://i0.wp.com/exitcode0.net/wp-content/uploads/2020/05/pi4.jpg?resize=298%2C242&amp;ssl=1" alt="Raspberry Pi boot from USB - exicode0">
<strong>WARNING</strong>: Although this is official, it is still in beta testing, so rock-solid stability is far from certain. Learn more about this beta release <a href="https://www.raspberrypi.org/forums/viewtopic.php?t=274595&amp;p=1663644#p1663644" title="https://www.raspberrypi.org/forums/viewtopic.php?t=274595&amp;p=1663644#p1663644">here</a>.</p><h2 id=why-should-i-make-my-raspberry-pi-boot-from-usb>Why should I make my Raspberry Pi boot from USB?<a hidden class=anchor aria-hidden=true href=#why-should-i-make-my-raspberry-pi-boot-from-usb>#</a></h2><p>Firstly let me address why you would want to do this and what makes many people relieved that the feature is on the horizon.</p><p><strong>A more robust, long-lasting boot device.</strong> Micro SD cards, particularly <a href=https://amzn.to/2TvRhs4 title=https://amzn.to/2TvRhs4>high-quality cards</a>, have come a long way and the days of a dead micro SD card seem to be dwindling. However, the small flash cards have a much shorter read/write life expectancy, and are not really designed to be used as a bootable OS media. Being able to use a SATA (over USB) device which was designed for the typical IO expected from an active operating system will ensure a long-lasting Pi setup.</p><p><a href=https://uk.camelcamelcamel.com/product/B073JWXGNT title=https://uk.camelcamelcamel.com/product/B073JWXGNT><img loading=lazy src="https://i1.wp.com/exitcode0.net/wp-content/uploads/2020/05/SD-card-prices.png?resize=774%2C471&amp;ssl=1" alt="Raspberry Pi boot from USB - SD card prices - exitcode0">
</a>32GB Sandisk Card Price over time – <strong>Camel Camel Camel</strong>
<strong>SATA based storage is cheaper per GB.</strong> Prices of micro SD cards have dropped significantly over the years, but SATA based storage is till better value for money at larger capacities, as well as the reliability benefits.</p><h2 id=how-do-i-make-my-raspberry-pi-boot-from-usb>How do I make my Raspberry Pi boot from USB?<a hidden class=anchor aria-hidden=true href=#how-do-i-make-my-raspberry-pi-boot-from-usb>#</a></h2><h4 id=difficulty>Difficulty:<a hidden class=anchor aria-hidden=true href=#difficulty>#</a></h4><p><strong>Medium</strong></p><p>There are a number of steps involved in this process and it will require you to bounce some files between devices that can be done on the Pi or by connecting the two bootable devices to another computer – this method won’t be covered in this guide.</p><h4 id=requirements>Requirements:<a hidden class=anchor aria-hidden=true href=#requirements>#</a></h4><ul><li><strong>Raspberry Pi</strong><ul><li><a href=https://amzn.to/3eiF2XT title=https://amzn.to/3eiF2XT>https://amzn.to/3eiF2XT</a> Pi 4 Starter kit</li></ul></li><li><strong>The latest version of Raspbian Buster</strong><ul><li><a href=https://www.raspberrypi.org/downloads/raspbian/ title=https://www.raspberrypi.org/downloads/raspbian/>https://www.raspberrypi.org/downloads/raspbian/</a></li></ul></li><li><strong>USB hard drive/flash drive</strong><ul><li><a href=https://amzn.to/2Twk4wm title=https://amzn.to/2Twk4wm>https://amzn.to/2Twk4wm</a> 256GB Sandisk USB drive.</li></ul></li><li><strong>Micro SD Card</strong> (still required at this point in BETA)<ul><li><a href=https://amzn.to/3ggknoX title=https://amzn.to/3ggknoX>https://amzn.to/3ggknoX</a> 32GB SanDisk Micro SD card</li></ul></li></ul><p>Burn the Rasbian ISO to your SD card using something like Etcher: <a href=https://www.balena.io/etcher/ title=https://www.balena.io/etcher/>https://www.balena.io/etcher/</a> and plug it into the Pi.</p><h4 id=process-as-of-23-05-2020>Process (as of 23-05-2020):<a hidden class=anchor aria-hidden=true href=#process-as-of-23-05-2020>#</a></h4><p>The breakdown of the process:</p><ol><li>Change the content of the EEPROM on the Raspberry Pi4 and set the boot device to USB.</li><li>Copy files from the boot directory of the SD card to the boot directory of the USB boot device.</li></ol><p>We must start by updating the Raspbian installation:</p><pre tabindex=0><code>sudo apt update -y &amp;&amp; sudo apt upgrade -y &amp;&amp; sudo rpi-update -y
</code></pre><p>Now that we are up to date, we must reboot before installing rpi-eeprom:</p><pre tabindex=0><code>sudo reboot now
</code></pre><pre tabindex=0><code>sudo apt install rpi-eeprom
</code></pre><p>Now we have to change the path of the Pi’s EEPROM firmware- this is done by moving from the critical channel to beta channel:</p><pre tabindex=0><code>sudo nano /etc/default/rpi-eeprom-update
</code></pre><p>Replace ‘<strong>critical</strong>‘ with ‘<strong>beta</strong>‘ followed by <strong>‘ctrl+x</strong>, <strong>y</strong>‘ to save and exit.</p><p>Now we can program the EEPROM as follows:</p><pre tabindex=0><code>sudo rpi-eeprom-update -d -f /lib/firmware/raspberrypi/bootloader/beta/pieeprom-2020-05-15.bin
</code></pre><p>Followed by a reboot:</p><pre tabindex=0><code>sudo reboot now
</code></pre><p>Once the reboot is complete, we can check the bootloader version as follows:</p><pre tabindex=0><code>vcgencmd bootloader_version
</code></pre><p>If we run the follow…</p><pre tabindex=0><code>vcgencmd bootloader_config
</code></pre><p>… we should see ‘BOOTORDER=0xF41. <strong>4</strong>‘<br>‘.4’ means that USB boot is active; ‘.1’ means that SD boot is active.</p><p><strong>At this point the Pi is ready, but the USB media is not.</strong> All that is left is to prepare the USB bootable media with the necessary files form our SD card installation.</p><hr><p>Start by plugging in the USB getting rasbian flashed to your USB device in the same manner as the SD card – personally I use Etchor: <a href=https://www.balena.io/etcher/ title=https://www.balena.io/etcher/>https://www.balena.io/etcher/</a></p><p>Now we need to copy all ‘.elf’ and ‘.dat’ files from the boot directory of our SD card to the boot directory on the USB. Let’s start by mounting the USB drive.</p><pre tabindex=0><code>sudo mkdir /mnt/usbdisk
sudo mount /dev/sd1 /mnt/usbdisk
</code></pre><p>Now that the USB drive is mounted, we can copy the required files:</p><pre tabindex=0><code>
sudo cp /boot/*.elf /mnt/usbdisk
sudo cp /boot/*.dat /mnt/usbdisk
</code></pre><p><strong>We are done!</strong></p><p>Now we can now power down (sudo shutdown now), remove the SD card, then power back up and check that we have successfully booted from out USB!</p><hr><h2 id=more-raspberry-pi-antics>More Raspberry Pi Antics:<a hidden class=anchor aria-hidden=true href=#more-raspberry-pi-antics>#</a></h2><ul><li>[SOLVED] – RUNNING DOCKER ON A RASPBERRY PI 4 – <a href=https://exitcode0.net/posts/solved-running-docker-on-a-raspberry-pi-4/ title=https://exitcode0.net/posts/solved-running-docker-on-a-raspberry-pi-4/>https://exitcode0.net/posts/solved-running-docker-on-a-raspberry-pi-4/</a></li><li>USING A DHT11 SENSOR WITH A RASPBERRY PI – <a href=https://exitcode0.net/using-a-dht11-sensor-with-a-raspberry-pi/ title=https://exitcode0.net/using-a-dht11-sensor-with-a-raspberry-pi/>https://exitcode0.net/using-a-dht11-sensor-with-a-raspberry-pi/</a></li><li>CREATING A LOCAL DNS SERVER WITH PI HOLE – <a href=https://exitcode0.net/creating-a-local-dns-server-with-pi-hole/ title=https://exitcode0.net/creating-a-local-dns-server-with-pi-hole/>https://exitcode0.net/creating-a-local-dns-server-with-pi-hole/</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://exitcode0.net/tags/linux/>Linux</a></li><li><a href=https://exitcode0.net/tags/pi4/>Pi4</a></li><li><a href=https://exitcode0.net/tags/raspberry-pi/>Raspberry Pi</a></li></ul><nav class=paginav><a class=prev href=https://exitcode0.net/posts/adding-wmic-command-to-the-windows-path/><span class=title>« Prev</span><br><span>Adding WMIC command to the Windows path</span>
</a><a class=next href=https://exitcode0.net/posts/copy-paste-in-vsphere-before-installing-vmware-tools/><span class=title>Next »</span><br><span>Copy Paste in vSphere before installing VMware tools</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://exitcode0.net/>ExitCode0</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>