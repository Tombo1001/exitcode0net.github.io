<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Convert an ESXi VM to UNRAID KVM with qume-img convert | ExitCode0</title>
<meta name=keywords content="Convert VMDK,ESXI,KVM,UNRAID"><meta name=description content="

Here’s a quick guide on how to convert ESXi VMs to and UNRAID KVM virtual machine – it’s a simple process but a minefield to navigate on searches and forums.
I currently have a windows 10 VM running on an ESXi server (vmdk) which I want to migrate to my UNRAID server which uses KVM to host VMs. The vmdk file is unfortunately thick provisioned, so I have had to do some disk juggling, due to my limited amount of available of space on my array."><meta name=author content="Tom"><link rel=canonical href=https://exitcode0.net/posts/convert-an-esxi-vm-to-unraid-kvm-with-qume-img-convert/><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://exitcode0.net/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://exitcode0.net/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://exitcode0.net/favicon-32x32.png><link rel=apple-touch-icon href=https://exitcode0.net/apple-touch-icon.png><link rel=mask-icon href=https://exitcode0.net/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://exitcode0.net/posts/convert-an-esxi-vm-to-unraid-kvm-with-qume-img-convert/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7745507566538945" crossorigin=anonymous></script><script data-name=BMC-Widget data-cfasync=false src=https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js data-id=exit data-description="Support me on Buy me a coffee!" data-message="Buy me a coffee" data-color=#FF813F data-position=Right data-x_margin=18 data-y_margin=165></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-EDE9MPZR9T"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-EDE9MPZR9T")}</script><meta property="og:title" content="Convert an ESXi VM to UNRAID KVM with qume-img convert"><meta property="og:description" content="

Here’s a quick guide on how to convert ESXi VMs to and UNRAID KVM virtual machine – it’s a simple process but a minefield to navigate on searches and forums.
I currently have a windows 10 VM running on an ESXi server (vmdk) which I want to migrate to my UNRAID server which uses KVM to host VMs. The vmdk file is unfortunately thick provisioned, so I have had to do some disk juggling, due to my limited amount of available of space on my array."><meta property="og:type" content="article"><meta property="og:url" content="https://exitcode0.net/posts/convert-an-esxi-vm-to-unraid-kvm-with-qume-img-convert/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-02-03T20:11:36+00:00"><meta property="article:modified_time" content="2020-02-03T20:11:36+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Convert an ESXi VM to UNRAID KVM with qume-img convert"><meta name=twitter:description content="

Here’s a quick guide on how to convert ESXi VMs to and UNRAID KVM virtual machine – it’s a simple process but a minefield to navigate on searches and forums.
I currently have a windows 10 VM running on an ESXi server (vmdk) which I want to migrate to my UNRAID server which uses KVM to host VMs. The vmdk file is unfortunately thick provisioned, so I have had to do some disk juggling, due to my limited amount of available of space on my array."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://exitcode0.net/posts/"},{"@type":"ListItem","position":2,"name":"Convert an ESXi VM to UNRAID KVM with qume-img convert","item":"https://exitcode0.net/posts/convert-an-esxi-vm-to-unraid-kvm-with-qume-img-convert/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Convert an ESXi VM to UNRAID KVM with qume-img convert","name":"Convert an ESXi VM to UNRAID KVM with qume-img convert","description":" Here’s a quick guide on how to convert ESXi VMs to and UNRAID KVM virtual machine – it’s a simple process but a minefield to navigate on searches and forums.\nI currently have a windows 10 VM running on an ESXi server (vmdk) which I want to migrate to my UNRAID server which uses KVM to host VMs. The vmdk file is unfortunately thick provisioned, so I have had to do some disk juggling, due to my limited amount of available of space on my array.\n","keywords":["Convert VMDK","ESXI","KVM","UNRAID"],"articleBody":" Here’s a quick guide on how to convert ESXi VMs to and UNRAID KVM virtual machine – it’s a simple process but a minefield to navigate on searches and forums.\nI currently have a windows 10 VM running on an ESXi server (vmdk) which I want to migrate to my UNRAID server which uses KVM to host VMs. The vmdk file is unfortunately thick provisioned, so I have had to do some disk juggling, due to my limited amount of available of space on my array.\nStep 1 – Copy the VMDK files to the UNRAID server There are a number of ways to do this, but I chose to mount an UNRAID share as an NFS datastore in ESXi and copy the VM folder across (note: copy not move). Remember to power off the VM before doing this. If you need help mounting NFS shares, just leave a comment below.\nStep 2 – Convert ESXi vmdk file to an img file using ‘qemu-img convert’ Now that we have a copy of the vmdk files on our UNRAID server, we can use the qemu-img tool to convert the files to a format that UNRAID can use to boot the VM – a .img file. Get console access to your UNRAID server and use the following command format:\nqemu-img convert -p -f vmdk -O raw /mnt/user/ /mnt/user/.img -p shows you the progress of the conversion. The larger the vmdk, the longer it will take -f the input file type -O the output file type /mnt/user/ is where UNRAID stores its shares. My VM was thick provisioned, so my output file was the same size as the vmdk. If your vmdk is thin provisioned, this process will swell the .img file – effectively making it thick provisioned – so make sure that you have enough available disk space for the conversion. I didn’t have this space available so I have to use the unassigned devices plugin and mount a USB hard drive to complete the conversion. Unassigned drives are mounted in /mnt/disks/.\nStep 3 – Create a KVM VM with the converted .img file Now we can create a VM using our newly created .img file; here are the settings I used for my converted Windows VM:\nThe CPU, memory, graphics card and other passthrough devices have no impact on the machine booting up. The VM will likely need to reconfigure itself to use the new hardware setup and you might need to install the virtIO network drivers.\nIf you are having problems, then it is best to keep the VM config simple and add devices as you solve problems.\nPhysical machine to UNRAID VM? Much of the same principals of this guide can be applied to moving a physical windows machine over to an UNRAID, KVM virtual machine. I will be covering this in future posts – using Clonezilla to build a .img file of a physical Windows machine.\n","wordCount":"498","inLanguage":"en","datePublished":"2020-02-03T20:11:36Z","dateModified":"2020-02-03T20:11:36Z","author":{"@type":"Person","name":"Tom"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://exitcode0.net/posts/convert-an-esxi-vm-to-unraid-kvm-with-qume-img-convert/"},"publisher":{"@type":"Organization","name":"ExitCode0","logo":{"@type":"ImageObject","url":"https://exitcode0.net/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://exitcode0.net/ accesskey=h title="ExitCode0 (Alt + H)">ExitCode0</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://datasolace.com/ title=DataSolace><span>DataSolace</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://exitcode0.net/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://exitcode0.net/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://exitcode0.net/privacy/ title=Privacy><span>Privacy</span></a></li><li><a href=https://exitcode0.net/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://exitcode0.net/>Home</a>&nbsp;»&nbsp;<a href=https://exitcode0.net/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Convert an ESXi VM to UNRAID KVM with qume-img convert</h1><div class=post-meta><span title='2020-02-03 20:11:36 +0000 UTC'>February 3, 2020</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Tom</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#step-1--copy-the-vmdk-files-to-the-unraid-server aria-label="Step 1 – Copy the VMDK files to the UNRAID server">Step 1 – Copy the VMDK files to the UNRAID server</a></li><li><a href=#step-2--convert-esxi-vmdk-file-to-an-img-file-using-qemu-img-convert aria-label="Step 2 – Convert ESXi vmdk file to an img file using ‘qemu-img convert’">Step 2 – Convert ESXi vmdk file to an img file using ‘qemu-img convert’</a></li><li><a href=#step-3--create-a-kvm-vm-with-the-converted-img-file aria-label="Step 3 – Create a KVM VM with the converted .img file">Step 3 – Create a KVM VM with the converted .img file</a><ul><li><a href=#physical-machine-to-unraid-vm aria-label="Physical machine to UNRAID VM?">Physical machine to UNRAID VM?</a></li></ul></li></ul></div></details></div><div class=post-content><p><img loading=lazy src="https://i1.wp.com/exitcode0.net/wp-content/uploads/2020/02/vmdk_to_kvm.jpg?resize=133%2C133&amp;ssl=1" alt="Convert ESXi VM to UNRAID KVM">
Here’s a quick guide on how to convert ESXi VMs to and UNRAID KVM virtual machine – it’s a simple process but a minefield to navigate on searches and forums.</p><p>I currently have a windows 10 VM running on an ESXi server (vmdk) which I want to migrate to my UNRAID server which uses KVM to host VMs. The vmdk file is unfortunately thick provisioned, so I have had to do some disk juggling, due to my limited amount of available of space on my array.</p><h2 id=step-1--copy-the-vmdk-files-to-the-unraid-server>Step 1 – Copy the VMDK files to the UNRAID server<a hidden class=anchor aria-hidden=true href=#step-1--copy-the-vmdk-files-to-the-unraid-server>#</a></h2><p>There are a number of ways to do this, but I chose to mount an UNRAID share as an NFS datastore in ESXi and copy the VM folder across (note: copy not move). Remember to power off the VM before doing this. If you need help mounting NFS shares, just leave a comment below.</p><h2 id=step-2--convert-esxi-vmdk-file-to-an-img-file-using-qemu-img-convert>Step 2 – Convert ESXi vmdk file to an img file using ‘qemu-img convert’<a hidden class=anchor aria-hidden=true href=#step-2--convert-esxi-vmdk-file-to-an-img-file-using-qemu-img-convert>#</a></h2><p>Now that we have a copy of the vmdk files on our UNRAID server, we can use the <strong>qemu-img</strong> tool to convert the files to a format that UNRAID can use to boot the VM – a .img file. Get console access to your UNRAID server and use the following command format:</p><pre tabindex=0><code>qemu-img convert -p -f vmdk -O raw /mnt/user/&lt;the location of your vmdk file&gt; /mnt/user/&lt;the location of your new file&gt;.img
</code></pre><ul><li>-p shows you the progress of the conversion. The larger the vmdk, the longer it will take</li><li>-f the input file type</li><li>-O the output file type</li><li>/mnt/user/ is where UNRAID stores its shares.</li></ul><p>My VM was thick provisioned, so my output file was the same size as the vmdk. If your vmdk is thin provisioned, this process will swell the .img file – effectively making it thick provisioned – so make sure that you have enough available disk space for the conversion. I didn’t have this space available so I have to use the <a href=https://forums.unraid.net/topic/44104-unassigned-devices-managing-disk-drives-and-remote-shares-outside-of-the-unraid-array/ title=https://forums.unraid.net/topic/44104-unassigned-devices-managing-disk-drives-and-remote-shares-outside-of-the-unraid-array/>unassigned devices plugin</a> and mount a USB hard drive to complete the conversion. Unassigned drives are mounted in /mnt/disks/.</p><h2 id=step-3--create-a-kvm-vm-with-the-converted-img-file>Step 3 – Create a KVM VM with the converted .img file<a hidden class=anchor aria-hidden=true href=#step-3--create-a-kvm-vm-with-the-converted-img-file>#</a></h2><p>Now we can create a VM using our newly created .img file; here are the settings I used for my converted Windows VM:</p><p><img loading=lazy src="https://i0.wp.com/exitcode0.net/wp-content/uploads/2020/02/vmdk_to_kvm2.png?resize=740%2C886&amp;ssl=1" alt="Convert ESXi VM to UNRAID KVM">
The CPU, memory, graphics card and other passthrough devices have no impact on the machine booting up. The VM will likely need to reconfigure itself to use the new hardware setup and you might need to install the virtIO network drivers.</p><p>If you are having problems, then it is best to keep the VM config simple and add devices as you solve problems.</p><h3 id=physical-machine-to-unraid-vm>Physical machine to UNRAID VM?<a hidden class=anchor aria-hidden=true href=#physical-machine-to-unraid-vm>#</a></h3><p>Much of the same principals of this guide can be applied to moving a physical windows machine over to an UNRAID, KVM virtual machine. I will be covering this in future posts – using Clonezilla to build a .img file of a physical Windows machine.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://exitcode0.net/tags/convert-vmdk/>Convert VMDK</a></li><li><a href=https://exitcode0.net/tags/esxi/>ESXI</a></li><li><a href=https://exitcode0.net/tags/kvm/>KVM</a></li><li><a href=https://exitcode0.net/tags/unraid/>UNRAID</a></li></ul><nav class=paginav><a class=prev href=https://exitcode0.net/posts/backup-nextcloud-with-rclone/><span class=title>« Prev</span><br><span>Backup Nextcloud with RCLONE</span>
</a><a class=next href=https://exitcode0.net/posts/backup-google-photos-with-rclone/><span class=title>Next »</span><br><span>Backup Google Photos with Rclone</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://exitcode0.net/>ExitCode0</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>