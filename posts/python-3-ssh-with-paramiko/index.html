<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Python 3 SSH with Paramiko | ExitCode0</title>
<meta name=keywords content="code,paramiko,python3,SSH"><meta name=description content="I have a number of projects which I am currently working on which usually involve a raspberry pi and so other TCP enabled object. One project, in particular, is to control a KVM server with buttons connected to a raspberry pi (follow on social media or RSS for that future post). I have been using Python 3 SSH with Paramiko to send commands KVM server from the pi. Here is how I do that…"><meta name=author content="Tom"><link rel=canonical href=https://exitcode0.net/posts/python-3-ssh-with-paramiko/><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://exitcode0.net/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://exitcode0.net/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://exitcode0.net/favicon-32x32.png><link rel=apple-touch-icon href=https://exitcode0.net/apple-touch-icon.png><link rel=mask-icon href=https://exitcode0.net/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://exitcode0.net/posts/python-3-ssh-with-paramiko/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7745507566538945" crossorigin=anonymous></script><script data-name=BMC-Widget data-cfasync=false src=https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js data-id=exit data-description="Support me on Buy me a coffee!" data-message="Buy me a coffee" data-color=#FF813F data-position=Right data-x_margin=18 data-y_margin=165></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-EDE9MPZR9T"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-EDE9MPZR9T")}</script><meta property="og:title" content="Python 3 SSH with Paramiko"><meta property="og:description" content="I have a number of projects which I am currently working on which usually involve a raspberry pi and so other TCP enabled object. One project, in particular, is to control a KVM server with buttons connected to a raspberry pi (follow on social media or RSS for that future post). I have been using Python 3 SSH with Paramiko to send commands KVM server from the pi. Here is how I do that…"><meta property="og:type" content="article"><meta property="og:url" content="https://exitcode0.net/posts/python-3-ssh-with-paramiko/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-05-15T18:18:17+00:00"><meta property="article:modified_time" content="2020-05-15T18:18:17+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Python 3 SSH with Paramiko"><meta name=twitter:description content="I have a number of projects which I am currently working on which usually involve a raspberry pi and so other TCP enabled object. One project, in particular, is to control a KVM server with buttons connected to a raspberry pi (follow on social media or RSS for that future post). I have been using Python 3 SSH with Paramiko to send commands KVM server from the pi. Here is how I do that…"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://exitcode0.net/posts/"},{"@type":"ListItem","position":2,"name":"Python 3 SSH with Paramiko","item":"https://exitcode0.net/posts/python-3-ssh-with-paramiko/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Python 3 SSH with Paramiko","name":"Python 3 SSH with Paramiko","description":"I have a number of projects which I am currently working on which usually involve a raspberry pi and so other TCP enabled object. One project, in particular, is to control a KVM server with buttons connected to a raspberry pi (follow on social media or RSS for that future post). I have been using Python 3 SSH with Paramiko to send commands KVM server from the pi. Here is how I do that…\n","keywords":["code","paramiko","python3","SSH"],"articleBody":"I have a number of projects which I am currently working on which usually involve a raspberry pi and so other TCP enabled object. One project, in particular, is to control a KVM server with buttons connected to a raspberry pi (follow on social media or RSS for that future post). I have been using Python 3 SSH with Paramiko to send commands KVM server from the pi. Here is how I do that…\nWhat is Paramiko? Paramiko is a Python (2.7, 3.4+) implementation of the SSHv2 protocol, providing both client and server functionality. While it leverages a Python C extension for low level cryptography, Paramiko itself is a pure Python interface around SSH networking concepts. – http://www.paramiko.org/\nTLDR – Paramiko is a python library which lets you do SSH things.\nThe how-to: Python 3 SSH with Paramiko For the purpose of this blog, I will be focusing on using paramiko to make client connections. Let’s include this library and dig into sending some dangerous commands to Linux boxes.\nimport paramiko I have been using a function to complete my SSH command and passing my SSH variables when calling that function. Lets start with that funciton:\ndef func_do_ssh_Stuff(address, usr, pwd, command): try: print(\"ssh \" + usr + \"@\" + address + \", running : \" + command) client: paramiko.SSHClient() client.load_system_host_keys() # this loads any local ssh keys client.set_missing_host_key_policy(paramiko.AutoAddPolicy()) client.connect(address, username=usr, password=pwd) _, ss_stdout, ss_stderr: client.exec_command(command) r_out, r_err: ss_stdout.readlines(), ss_stderr.read() print(r_err) if len(r_err) \u003e 5: print(r_err) else: print(r_out) client.close() except IOError: print(\".. host \" + address + \" is not up\") return \"host not up\", \"host not up\" What’s going on here? The function is expecting to be handed a username, password (or none if you plan to use key based authentication (recommended)), host address and the shell command to run once the connection is established.\nParamiko checks for local keys on the system which it can use when connecting to the host, then attempts a connection. Once the connection is established the command we passed to the function will be executed.\nFinally, we print the output or error returned by the execution of that command. This is all encased in a ‘try, catch’ which will inform us if the SSH target is offline.\nCalling the Paramiko SSH function Now that we have our SSH function declared, we can call it:\nfunc_do_ssh_Stuff(\"192.168.0.33\", \"root\", \"\", \"echo Hello World!\") Note: you will need to change the IP to suit and add a password (“”) if required.\nI would highly recommend using key-based authentication on this one, otherwise, it will require you to hard code SSH passwords into your scripts… not a great idea.\nAnd now that you can SSH from a Pi (or anything else which runs python), the world is your oyster!\nMore wonderful Python things: How To: Python infinite loops with while true – https://exitcode0.net/posts/how-to-python-infinite-loops-with-while-true/ Kasa home automation with IFTTT and python webooks – https://exitcode0.net/kasa-home-automation-with-ifttt-and-python-webooks/ Getting started with Python 3 – a beginner’s cheat sheet – https://exitcode0.net/getting-started-with-python-3-a-beginners-cheat-sheet/ ","wordCount":"496","inLanguage":"en","datePublished":"2020-05-15T18:18:17Z","dateModified":"2020-05-15T18:18:17Z","author":{"@type":"Person","name":"Tom"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://exitcode0.net/posts/python-3-ssh-with-paramiko/"},"publisher":{"@type":"Organization","name":"ExitCode0","logo":{"@type":"ImageObject","url":"https://exitcode0.net/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://exitcode0.net/ accesskey=h title="ExitCode0 (Alt + H)">ExitCode0</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://datasolace.com/ title=DataSolace><span>DataSolace</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://exitcode0.net/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://exitcode0.net/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://exitcode0.net/privacy/ title=Privacy><span>Privacy</span></a></li><li><a href=https://exitcode0.net/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://exitcode0.net/>Home</a>&nbsp;»&nbsp;<a href=https://exitcode0.net/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Python 3 SSH with Paramiko</h1><div class=post-meta><span title='2020-05-15 18:18:17 +0000 UTC'>May 15, 2020</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Tom</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#the-how-to-python-3-ssh-with-paramiko aria-label="The how-to: Python 3 SSH with Paramiko">The how-to: Python 3 SSH with Paramiko</a><ul><li><a href=#calling-the-paramiko-ssh-function aria-label="Calling the Paramiko SSH function">Calling the Paramiko SSH function</a></li></ul></li><li><a href=#more-wonderful-python-things aria-label="More wonderful Python things:">More wonderful Python things:</a></li></ul></div></details></div><div class=post-content><p>I have a number of projects which I am currently working on which usually involve a raspberry pi and so other TCP enabled object. One project, in particular, is to control a KVM server with buttons connected to a raspberry pi (follow on social media or RSS for that future post). I have been using Python 3 SSH with Paramiko to send commands KVM server from the pi. Here is how I do that…</p><h2 id=what-is-paramiko><img loading=lazy src="https://i0.wp.com/exitcode0.net/wp-content/uploads/2020/05/paramiko-SSH.png?resize=379%2C288&amp;ssl=1" alt="Python 3 SSH with Paramiko - exitcode0">
What is Paramiko?</h2><p><em>Paramiko is a Python (2.7, 3.4+) implementation of the SSHv2 protocol, providing both client and server functionality. While it leverages a Python C extension for low level cryptography, Paramiko itself is a pure Python interface around SSH networking concepts.</em> – <a href=http://www.paramiko.org/ title=http://www.paramiko.org/>http://www.paramiko.org/</a></p><p><strong>TLDR – Paramiko is a python library which lets you do SSH things.</strong></p><h2 id=the-how-to-python-3-ssh-with-paramiko>The how-to: Python 3 SSH with Paramiko<a hidden class=anchor aria-hidden=true href=#the-how-to-python-3-ssh-with-paramiko>#</a></h2><p>For the purpose of this blog, I will be focusing on using paramiko to make client connections. Let’s include this library and dig into sending some dangerous commands to Linux boxes.</p><pre tabindex=0><code>import paramiko
</code></pre><p>I have been using a function to complete my SSH command and passing my SSH variables when calling that function. Lets start with that funciton:</p><pre tabindex=0><code>def func_do_ssh_Stuff(address, usr, pwd, command):
        try:
            print(&#34;ssh &#34; + usr + &#34;@&#34; + address + &#34;, running : &#34; +
                         command)
            client: paramiko.SSHClient()
            client.load_system_host_keys() # this loads any local ssh keys
            client.set_missing_host_key_policy(paramiko.AutoAddPolicy())

            client.connect(address, username=usr, password=pwd)
            _, ss_stdout, ss_stderr: client.exec_command(command)
            r_out, r_err: ss_stdout.readlines(), ss_stderr.read()
            print(r_err)
            if len(r_err) &gt; 5:
                print(r_err)
            else:
                print(r_out)
            client.close()
        except IOError:
            print(&#34;.. host &#34; + address + &#34; is not up&#34;)
            return &#34;host not up&#34;, &#34;host not up&#34;
</code></pre><p><strong>What’s going on here?</strong> The function is expecting to be handed a username, password (or none if you plan to use key based authentication (recommended)), host address and the shell command to run once the connection is established.</p><p>Paramiko checks for local keys on the system which it can use when connecting to the host, then attempts a connection. Once the connection is established the command we passed to the function will be executed.</p><p>Finally, we print the output or error returned by the execution of that command. This is all encased in a ‘try, catch’ which will inform us if the SSH target is offline.</p><h3 id=calling-the-paramiko-ssh-function>Calling the Paramiko SSH function<a hidden class=anchor aria-hidden=true href=#calling-the-paramiko-ssh-function>#</a></h3><p>Now that we have our SSH function declared, we can call it:</p><pre tabindex=0><code>func_do_ssh_Stuff(&#34;192.168.0.33&#34;, &#34;root&#34;, &#34;&#34;, &#34;echo Hello World!&#34;)
</code></pre><p><strong>Note:</strong> you will need to change the IP to suit and add a password (“”) if required.</p><p>I would highly recommend using key-based authentication on this one, otherwise, it will require you to hard code SSH passwords into your scripts… <strong>not a great idea</strong>.</p><p>And now that you can SSH from a Pi (or anything else which runs python), the world is your oyster!</p><hr><h2 id=more-wonderful-python-things>More wonderful Python things:<a hidden class=anchor aria-hidden=true href=#more-wonderful-python-things>#</a></h2><ul><li>How To: Python infinite loops with while true – <a href=https://exitcode0.net/posts/how-to-python-infinite-loops-with-while-true/ title=https://exitcode0.net/posts/how-to-python-infinite-loops-with-while-true/>https://exitcode0.net/posts/how-to-python-infinite-loops-with-while-true/</a></li><li>Kasa home automation with IFTTT and python webooks – <a href=https://exitcode0.net/kasa-home-automation-with-ifttt-and-python-webooks/ title=https://exitcode0.net/kasa-home-automation-with-ifttt-and-python-webooks/>https://exitcode0.net/kasa-home-automation-with-ifttt-and-python-webooks/</a></li><li>Getting started with Python 3 – a beginner’s cheat sheet – <a href=https://exitcode0.net/getting-started-with-python-3-a-beginners-cheat-sheet/ title=https://exitcode0.net/getting-started-with-python-3-a-beginners-cheat-sheet/>https://exitcode0.net/getting-started-with-python-3-a-beginners-cheat-sheet/</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://exitcode0.net/tags/code/>Code</a></li><li><a href=https://exitcode0.net/tags/paramiko/>Paramiko</a></li><li><a href=https://exitcode0.net/tags/python3/>Python3</a></li><li><a href=https://exitcode0.net/tags/ssh/>SSH</a></li></ul><nav class=paginav><a class=prev href=https://exitcode0.net/posts/automatically-pause-spotify-with-the-3cx-client/><span class=title>« Prev</span><br><span>Automatically pause Spotify with the 3CX client</span>
</a><a class=next href=https://exitcode0.net/posts/how-to-python-infinite-loops-with-while-true/><span class=title>Next »</span><br><span>How To: Python infinite loops with while true</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://exitcode0.net/>ExitCode0</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>