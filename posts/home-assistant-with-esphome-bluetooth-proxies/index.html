<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Home Assistant With ESPhome Bluetooth Proxies | ExitCode0</title>
<meta name=keywords content="home automation,home assistant,esphome,Switchbot"><meta name=description content="Setting Up a SwitchBot BLE Thermo-Hygrometer in Home Assistant with ESPHome bluetooth_proxy
In this blog post, I’ll walk you through how I set up a SwitchBot BLE (Bluetooth Low Energy) Indoor/Outdoor Thermo-Hygrometer in Home Assistant (HA) using an ESP32 running ESPHome as a Bluetooth proxy. If you’re working with Home Assistant in a containerized environment (as I am), you might face challenges with Bluetooth connectivity, in particular, passing through a bluetooth adapter. This approach solves that elegantly and opens the door to other Bluetooth-based projects by providing extended bluetooth connectivity over a WiFi backbone."><meta name=author content="Tom C"><link rel=canonical href=https://exitcode0.net/posts/home-assistant-with-esphome-bluetooth-proxies/><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://exitcode0.net/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://exitcode0.net/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://exitcode0.net/favicon-32x32.png><link rel=apple-touch-icon href=https://exitcode0.net/apple-touch-icon.png><link rel=mask-icon href=https://exitcode0.net/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://exitcode0.net/posts/home-assistant-with-esphome-bluetooth-proxies/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7745507566538945" crossorigin=anonymous></script><script data-name=BMC-Widget data-cfasync=false src=https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js data-id=exit data-description="Support me on Buy me a coffee!" data-message="Buy me a coffee" data-color=#FF813F data-position=Right data-x_margin=18 data-y_margin=165></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-EDE9MPZR9T"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-EDE9MPZR9T")}</script><meta property="og:title" content="Home Assistant With ESPhome Bluetooth Proxies"><meta property="og:description" content="Setting Up a SwitchBot BLE Thermo-Hygrometer in Home Assistant with ESPHome bluetooth_proxy
In this blog post, I’ll walk you through how I set up a SwitchBot BLE (Bluetooth Low Energy) Indoor/Outdoor Thermo-Hygrometer in Home Assistant (HA) using an ESP32 running ESPHome as a Bluetooth proxy. If you’re working with Home Assistant in a containerized environment (as I am), you might face challenges with Bluetooth connectivity, in particular, passing through a bluetooth adapter. This approach solves that elegantly and opens the door to other Bluetooth-based projects by providing extended bluetooth connectivity over a WiFi backbone."><meta property="og:type" content="article"><meta property="og:url" content="https://exitcode0.net/posts/home-assistant-with-esphome-bluetooth-proxies/"><meta property="og:image" content="https://exitcode0.net/images/switchbot-outdoor-sensor.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-01-08T17:00:00+01:00"><meta property="article:modified_time" content="2025-01-08T17:00:00+01:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://exitcode0.net/images/switchbot-outdoor-sensor.jpg"><meta name=twitter:title content="Home Assistant With ESPhome Bluetooth Proxies"><meta name=twitter:description content="Setting Up a SwitchBot BLE Thermo-Hygrometer in Home Assistant with ESPHome bluetooth_proxy
In this blog post, I’ll walk you through how I set up a SwitchBot BLE (Bluetooth Low Energy) Indoor/Outdoor Thermo-Hygrometer in Home Assistant (HA) using an ESP32 running ESPHome as a Bluetooth proxy. If you’re working with Home Assistant in a containerized environment (as I am), you might face challenges with Bluetooth connectivity, in particular, passing through a bluetooth adapter. This approach solves that elegantly and opens the door to other Bluetooth-based projects by providing extended bluetooth connectivity over a WiFi backbone."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://exitcode0.net/posts/"},{"@type":"ListItem","position":2,"name":"Home Assistant With ESPhome Bluetooth Proxies","item":"https://exitcode0.net/posts/home-assistant-with-esphome-bluetooth-proxies/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Home Assistant With ESPhome Bluetooth Proxies","name":"Home Assistant With ESPhome Bluetooth Proxies","description":"Setting Up a SwitchBot BLE Thermo-Hygrometer in Home Assistant with ESPHome bluetooth_proxy In this blog post, I’ll walk you through how I set up a SwitchBot BLE (Bluetooth Low Energy) Indoor/Outdoor Thermo-Hygrometer in Home Assistant (HA) using an ESP32 running ESPHome as a Bluetooth proxy. If you’re working with Home Assistant in a containerized environment (as I am), you might face challenges with Bluetooth connectivity, in particular, passing through a bluetooth adapter. This approach solves that elegantly and opens the door to other Bluetooth-based projects by providing extended bluetooth connectivity over a WiFi backbone.\n","keywords":["home automation","home assistant","esphome","Switchbot"],"articleBody":"Setting Up a SwitchBot BLE Thermo-Hygrometer in Home Assistant with ESPHome bluetooth_proxy In this blog post, I’ll walk you through how I set up a SwitchBot BLE (Bluetooth Low Energy) Indoor/Outdoor Thermo-Hygrometer in Home Assistant (HA) using an ESP32 running ESPHome as a Bluetooth proxy. If you’re working with Home Assistant in a containerized environment (as I am), you might face challenges with Bluetooth connectivity, in particular, passing through a bluetooth adapter. This approach solves that elegantly and opens the door to other Bluetooth-based projects by providing extended bluetooth connectivity over a WiFi backbone.\nThe switchbot sensor is great for a number of reasons, check it out on the Smart Home Index.\nWhy I Needed a Bluetooth Proxy My Home Assistant instance is running in a Docker container on a server that doesn’t have a Bluetooth device installed or configured. While USB Bluetooth dongles and passthrough are options, they often come with limited range and reliability issues - there are number of well tested devices and chipsets listed here: known working high-performance adapters. Using an ESP32 with ESPHome as a Bluetooth proxy has been a game-changer. Not only does it extend the Bluetooth range across my house and garden, but it also integrates seamlessly with Home Assistant.\nSetting Up ESPHome on the ESP32 Flashing ESPHome to the ESP32 To get started, you’ll need an ESP32. I’ve used a simple ESP32 development board and a 3D-printed case to house it neatly. There are two main ways that you can flash your ESP32 with ESPhome firmware, through a self hosted instance of the ESPhome server, or using the ready-made projects page.\nIf you are going to follow the path of flashing from your own local ESPhome instance, here is a suitable config to do that (adjust your esp32 board value to suit):\nesphome: name: esp32-bluetooth-proxy friendly_name: Bluetooth Proxy min_version: 2024.6.0 name_add_mac_suffix: true platformio_options: board_build.f_flash: 40000000L board_build.flash_mode: dio board_build.flash_size: 4MB esp32: board: esp32-c3-devkitm-1 framework: type: esp-idf sdkconfig_options: CONFIG_BT_BLE_42_FEATURES_SUPPORTED: y CONFIG_BT_BLE_50_FEATURES_SUPPORTED: n wifi: # values are stored in the esphome secrets vault or you can manually entire the values in double quotes. ssid: \"Your_WiFi_SSID\" password: \"Your_WiFi_Password\" api: logger: ota: - platform: esphome id: ota_esphome esp32_ble_tracker: scan_parameters: # We currently use the defaults to ensure Bluetooth # can co-exist with WiFi In the future we may be able to # enable the built-in coexistence logic in ESP-IDF active: true bluetooth_proxy: active: true button: - platform: safe_mode id: button_safe_mode name: Safe Mode Boot - platform: factory_reset id: factory_reset_btn name: Factory reset This bluetooth_proxy: line enables the ESP32 to act as a bridge between Bluetooth devices and Home Assistant. The api: line enabled seamless communication with Home Assistant - you can choose to encrypt this API.\nThere are more bluetooth proxy yaml examples to be found here: https://github.com/esphome/bluetooth-proxies\n3D Printed Case My particular ESP32-WROOM-32 has the GPIO header pins installed as I hope to add additional sensors down the road. Because of this, the 3D printed case is less slender, but overall the footprint of the cased device is very small and easily tucked away throughout the house.\ncredit: tispokes\nIt’s even possible to power these devices using PoE-USB breakout adapters, so you could place these devices anywhere that you can run network cable! These are available as USB-C and Micro USB-B.\nConnecting the Bluetooth Proxy to Home Assistant With the ESP32 configured and powered on, it will automatically register in Home Assistant if you’ve set up ESPHome integration. Here’s how to ensure everything is working:\nGo to Settings \u003e Devices \u0026 Services in Home Assistant. Look for the ESP32 device under the ESPHome integration. Confirm that the Bluetooth proxy is active. One limitation that I have noticed with the wireless ESP32 is that it tends to show up in Home Assistant as Disconnected. Unfortunately this is just a limitation of the shared wireless/bluetooth chipset - not an issue for ESP32 devices with ethernet.\nAdding the SwitchBot BLE Thermo-Hygrometer With the Bluetooth proxy/proxies active, adding the SwitchBot Thermo-Hygrometer is now incredibly straightforward:\nRemove the rear cover, pull out the transit battery disconnect slip - this powers on the device. In Home Assistant, go to Settings \u003e Devices \u0026 Services. The Thermo-Hygrometer should appear automatically. Once added, you’ll begin to see temperature and humidity readings. Configuring the Home Assistant Dashboard To display the temperature and humidity on your dashboard, add a new card. Here I am using the awesome mini-graph-card HACS plugin, this is what the dhasboard yaml looks like:\ntype: custom:mini-graph-card entities: - sensor.gargen_thermo_hygrometer show: labels: true color_thresholds: - value: -10 color: \"#3255a8\" - value: 0 color: \"#3293a8\" - value: 10 color: \"#82d300\" - value: 15 color: \"#d39b00\" - value: 19 color: \"#d35400\" - value: 23 color: \"#c0392b\" This will show real-time readings directly on your Home Assistant dashboard.\nYes… it’s cold out there! This demonstrates just how great the Switchbot sensor is for this use case; its IP rating makes it a resilient outdoor temperature sensor and arguably more reliable than a local weather forecast service.\nThe Benefits of a Bluetooth Proxy Using an ESP32 as a Bluetooth proxy has significantly extended the range of my Home Assistant setup. With strategic placement of ESP32 devices, I now have full Bluetooth coverage across my home and garden, far beyond what a single USB Bluetooth adapter could achieve.\nThis project has been a great starting point for other ESPHome-based Bluetooth integrations. For example, I’ve also started experimenting with:\nPresence detection using ESP32 and BLE tags. Additional ESP32 devices with built-in temperature and humidity sensors. Conclusion By using an ESP32 running ESPHome as a Bluetooth proxy, I’ve unlocked the full potential of Bluetooth integrations in Home Assistant, even in a containerized setup. The SwitchBot BLE Thermo-Hygrometer is just one example of the possibilities this setup offers. Whether you’re looking to monitor environmental conditions, enable presence detection, or control Bluetooth-enabled devices, this approach provides flexibility and scalability.\n","wordCount":"977","inLanguage":"en","image":"https://exitcode0.net/images/switchbot-outdoor-sensor.jpg","datePublished":"2025-01-08T17:00:00+01:00","dateModified":"2025-01-08T17:00:00+01:00","author":{"@type":"Person","name":"Tom C"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://exitcode0.net/posts/home-assistant-with-esphome-bluetooth-proxies/"},"publisher":{"@type":"Organization","name":"ExitCode0","logo":{"@type":"ImageObject","url":"https://exitcode0.net/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://exitcode0.net/ accesskey=h title="ExitCode0 (Alt + H)">ExitCode0</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://datasolace.com/ title=DataSolace><span>DataSolace</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://exitcode0.net/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://exitcode0.net/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://exitcode0.net/privacy/ title=Privacy><span>Privacy</span></a></li><li><a href=https://exitcode0.net/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://exitcode0.net/>Home</a>&nbsp;»&nbsp;<a href=https://exitcode0.net/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Home Assistant With ESPhome Bluetooth Proxies</h1><div class=post-meta><span title='2025-01-08 17:00:00 +0100 +0100'>January 8, 2025</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;Tom C</div></header><figure class=entry-cover><img loading=eager src=https://exitcode0.net/images/switchbot-outdoor-sensor.jpg alt="Setting Up a SwitchBot BLE Thermo-Hygrometer in Home Assistant with ESPHome bluetooth_proxy"></figure><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#setting-up-a-switchbot-ble-thermo-hygrometer-in-home-assistant-with-esphome-bluetooth_proxy aria-label="Setting Up a SwitchBot BLE Thermo-Hygrometer in Home Assistant with ESPHome bluetooth_proxy">Setting Up a SwitchBot BLE Thermo-Hygrometer in Home Assistant with ESPHome bluetooth_proxy</a><ul><ul><li><a href=#why-i-needed-a-bluetooth-proxy aria-label="Why I Needed a Bluetooth Proxy">Why I Needed a Bluetooth Proxy</a></li><li><a href=#setting-up-esphome-on-the-esp32 aria-label="Setting Up ESPHome on the ESP32">Setting Up ESPHome on the ESP32</a><ul><li><a href=#flashing-esphome-to-the-esp32 aria-label="Flashing ESPHome to the ESP32">Flashing ESPHome to the ESP32</a></li><li><a href=#3d-printed-case aria-label="3D Printed Case">3D Printed Case</a></li></ul></li><li><a href=#connecting-the-bluetooth-proxy-to-home-assistant aria-label="Connecting the Bluetooth Proxy to Home Assistant">Connecting the Bluetooth Proxy to Home Assistant</a></li><li><a href=#adding-the-switchbot-ble-thermo-hygrometer aria-label="Adding the SwitchBot BLE Thermo-Hygrometer">Adding the SwitchBot BLE Thermo-Hygrometer</a><ul><li><a href=#configuring-the-home-assistant-dashboard aria-label="Configuring the Home Assistant Dashboard">Configuring the Home Assistant Dashboard</a></li></ul></li><li><a href=#the-benefits-of-a-bluetooth-proxy aria-label="The Benefits of a Bluetooth Proxy">The Benefits of a Bluetooth Proxy</a></li><li><a href=#conclusion aria-label=Conclusion>Conclusion</a></li></ul></ul></li></ul></div></details></div><div class=post-content><h1 id=setting-up-a-switchbot-ble-thermo-hygrometer-in-home-assistant-with-esphome-bluetooth_proxy>Setting Up a SwitchBot BLE Thermo-Hygrometer in Home Assistant with ESPHome bluetooth_proxy<a hidden class=anchor aria-hidden=true href=#setting-up-a-switchbot-ble-thermo-hygrometer-in-home-assistant-with-esphome-bluetooth_proxy>#</a></h1><p>In this blog post, I’ll walk you through how I set up a SwitchBot BLE (Bluetooth Low Energy) Indoor/Outdoor Thermo-Hygrometer in Home Assistant (HA) using an ESP32 running ESPHome as a Bluetooth proxy. If you’re working with Home Assistant in a containerized environment (as I am), you might face challenges with Bluetooth connectivity, in particular, passing through a bluetooth adapter. This approach solves that elegantly and opens the door to other Bluetooth-based projects by providing extended bluetooth connectivity over a WiFi backbone.</p><p>The switchbot sensor is great for a number of reasons, check it out on the <a href="https://smarthomeindex.com/?deviceId=cac98b86-c500-4aea-bbe6-81ffad793cb6">Smart Home Index</a>.</p><hr><h3 id=why-i-needed-a-bluetooth-proxy>Why I Needed a Bluetooth Proxy<a hidden class=anchor aria-hidden=true href=#why-i-needed-a-bluetooth-proxy>#</a></h3><p>My Home Assistant instance is running in a Docker container on a server that doesn’t have a Bluetooth device installed or configured. While USB Bluetooth dongles and passthrough are options, they often come with limited range and reliability issues - there are number of well tested devices and chipsets listed here: <a href=https://www.home-assistant.io/integrations/bluetooth/#known-working-high-performance-adapters>known working high-performance adapters</a>. Using an ESP32 with ESPHome as a Bluetooth proxy has been a game-changer. Not only does it extend the Bluetooth range across my house and garden, but it also integrates seamlessly with Home Assistant.</p><hr><h3 id=setting-up-esphome-on-the-esp32>Setting Up ESPHome on the ESP32<a hidden class=anchor aria-hidden=true href=#setting-up-esphome-on-the-esp32>#</a></h3><h4 id=flashing-esphome-to-the-esp32>Flashing ESPHome to the ESP32<a hidden class=anchor aria-hidden=true href=#flashing-esphome-to-the-esp32>#</a></h4><p>To get started, you’ll need an ESP32. I’ve used a simple ESP32 development board and a 3D-printed case to house it neatly. There are two main ways that you can flash your ESP32 with ESPhome firmware, through a self hosted instance of the ESPhome server, or using the <a href=https://esphome.io/projects/index.html>ready-made projects page</a>.</p><p>If you are going to follow the path of flashing from your own local ESPhome instance, here is a suitable config to do that (adjust your esp32 board value to suit):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>esphome</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>esp32-bluetooth-proxy</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>friendly_name</span>: <span style=color:#ae81ff>Bluetooth Proxy</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>min_version</span>: <span style=color:#ae81ff>2024.6.0</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>name_add_mac_suffix</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>platformio_options</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>board_build.f_flash</span>: <span style=color:#ae81ff>40000000L</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>board_build.flash_mode</span>: <span style=color:#ae81ff>dio</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>board_build.flash_size</span>: <span style=color:#ae81ff>4MB</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>esp32</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>board</span>: <span style=color:#ae81ff>esp32-c3-devkitm-1</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>framework</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>esp-idf</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>sdkconfig_options</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>CONFIG_BT_BLE_42_FEATURES_SUPPORTED</span>: <span style=color:#66d9ef>y</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>CONFIG_BT_BLE_50_FEATURES_SUPPORTED</span>: <span style=color:#66d9ef>n</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>wifi</span>: <span style=color:#75715e># values are stored in the esphome secrets vault or you can manually entire the values in double quotes.</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>ssid</span>: <span style=color:#e6db74>&#34;Your_WiFi_SSID&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>password</span>: <span style=color:#e6db74>&#34;Your_WiFi_Password&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>api</span>:
</span></span><span style=display:flex><span><span style=color:#f92672>logger</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>ota</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>platform</span>: <span style=color:#ae81ff>esphome</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>id</span>: <span style=color:#ae81ff>ota_esphome</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>esp32_ble_tracker</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>scan_parameters</span>:
</span></span><span style=display:flex><span>    <span style=color:#75715e># We currently use the defaults to ensure Bluetooth</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># can co-exist with WiFi In the future we may be able to</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># enable the built-in coexistence logic in ESP-IDF</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>active</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>bluetooth_proxy</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>active</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>button</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>platform</span>: <span style=color:#ae81ff>safe_mode</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>id</span>: <span style=color:#ae81ff>button_safe_mode</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Safe Mode Boot</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>platform</span>: <span style=color:#ae81ff>factory_reset</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>id</span>: <span style=color:#ae81ff>factory_reset_btn</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Factory reset</span>
</span></span></code></pre></div><p>This <code>bluetooth_proxy:</code> line enables the ESP32 to act as a bridge between Bluetooth devices and Home Assistant. The <code>api:</code> line enabled seamless communication with Home Assistant - you can choose to encrypt this API.</p><p>There are more bluetooth proxy yaml examples to be found here: <a href=https://github.com/esphome/bluetooth-proxies>https://github.com/esphome/bluetooth-proxies</a></p><h4 id=3d-printed-case>3D Printed Case<a hidden class=anchor aria-hidden=true href=#3d-printed-case>#</a></h4><p>My particular <a href=https://amzn.to/4aaZFDx><em>ESP32-WROOM-32</em></a> has the GPIO header pins installed as I hope to add additional sensors down the road. Because of this, the 3D printed case is less slender, but overall the footprint of the cased device is very small and easily tucked away throughout the house.</p><p><img loading=lazy src=/images/esp32-3d-printed-case.png alt="3D print from tispokes on Thingiverse"></p><p>credit: <a href=https://www.thingiverse.com/thing:5361695/files>tispokes</a></p><p>It&rsquo;s even possible to power these devices using PoE-USB breakout adapters, so you could place these devices anywhere that you can run network cable! These are available as USB-C and Micro USB-B.</p><hr><h3 id=connecting-the-bluetooth-proxy-to-home-assistant>Connecting the Bluetooth Proxy to Home Assistant<a hidden class=anchor aria-hidden=true href=#connecting-the-bluetooth-proxy-to-home-assistant>#</a></h3><p>With the ESP32 configured and powered on, it will automatically register in Home Assistant if you’ve set up ESPHome integration. Here’s how to ensure everything is working:</p><ol><li>Go to <strong>Settings > Devices & Services</strong> in Home Assistant.</li><li>Look for the ESP32 device under the ESPHome integration.</li><li>Confirm that the Bluetooth proxy is active.</li></ol><p><img loading=lazy src=/images/esphome-bt-proxy.png alt="ESPhome Bluetooth proxy detected in Home Assistant"></p><p>One limitation that I have noticed with the wireless ESP32 is that it tends to show up in Home Assistant as Disconnected. Unfortunately this is just a limitation of the shared wireless/bluetooth chipset - not an issue for ESP32 devices with ethernet.</p><hr><h3 id=adding-the-switchbot-ble-thermo-hygrometer>Adding the SwitchBot BLE Thermo-Hygrometer<a hidden class=anchor aria-hidden=true href=#adding-the-switchbot-ble-thermo-hygrometer>#</a></h3><p>With the Bluetooth proxy/proxies active, adding the SwitchBot Thermo-Hygrometer is now incredibly straightforward:</p><ol><li>Remove the rear cover, pull out the transit battery disconnect slip - this powers on the device.</li><li>In Home Assistant, go to <strong>Settings > Devices & Services</strong>.</li><li>The Thermo-Hygrometer should appear automatically. Once added, you’ll begin to see temperature and humidity readings.</li></ol><p><img loading=lazy src=/images/ha-switchbot-sensor.png alt="Switchbot Temperature sensor in Home Assistant settings"></p><h4 id=configuring-the-home-assistant-dashboard>Configuring the Home Assistant Dashboard<a hidden class=anchor aria-hidden=true href=#configuring-the-home-assistant-dashboard>#</a></h4><p>To display the temperature and humidity on your dashboard, add a new card. Here I am using the awesome <a href=https://github.com/kalkih/mini-graph-card>mini-graph-card</a> HACS plugin, this is what the dhasboard yaml looks like:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>type</span>: <span style=color:#ae81ff>custom:mini-graph-card</span>
</span></span><span style=display:flex><span><span style=color:#f92672>entities</span>:
</span></span><span style=display:flex><span>  - <span style=color:#ae81ff>sensor.gargen_thermo_hygrometer</span>
</span></span><span style=display:flex><span><span style=color:#f92672>show</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>labels</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#f92672>color_thresholds</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>value</span>: -<span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>color</span>: <span style=color:#e6db74>&#34;#3255a8&#34;</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>value</span>: <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>color</span>: <span style=color:#e6db74>&#34;#3293a8&#34;</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>value</span>: <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>color</span>: <span style=color:#e6db74>&#34;#82d300&#34;</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>value</span>: <span style=color:#ae81ff>15</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>color</span>: <span style=color:#e6db74>&#34;#d39b00&#34;</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>value</span>: <span style=color:#ae81ff>19</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>color</span>: <span style=color:#e6db74>&#34;#d35400&#34;</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>value</span>: <span style=color:#ae81ff>23</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>color</span>: <span style=color:#e6db74>&#34;#c0392b&#34;</span>
</span></span></code></pre></div><p>This will show real-time readings directly on your Home Assistant dashboard.</p><p><img loading=lazy src=/images/mini-card-temp.png alt="Home Assistant Mini Graph Card showing switchbot temperature data"></p><p>Yes&mldr; it&rsquo;s cold out there! This demonstrates just how great the Switchbot sensor is for this use case; its IP rating makes it a resilient outdoor temperature sensor and arguably more reliable than a local weather forecast service.</p><hr><h3 id=the-benefits-of-a-bluetooth-proxy>The Benefits of a Bluetooth Proxy<a hidden class=anchor aria-hidden=true href=#the-benefits-of-a-bluetooth-proxy>#</a></h3><p>Using an ESP32 as a Bluetooth proxy has significantly extended the range of my Home Assistant setup. With strategic placement of ESP32 devices, I now have full Bluetooth coverage across my home and garden, far beyond what a single USB Bluetooth adapter could achieve.</p><p>This project has been a great starting point for other ESPHome-based Bluetooth integrations. For example, I’ve also started experimenting with:</p><ul><li>Presence detection using ESP32 and BLE tags.</li><li>Additional ESP32 devices with built-in temperature and humidity sensors.</li></ul><hr><h3 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h3><p>By using an ESP32 running ESPHome as a Bluetooth proxy, I’ve unlocked the full potential of Bluetooth integrations in Home Assistant, even in a containerized setup. The SwitchBot BLE Thermo-Hygrometer is just one example of the possibilities this setup offers. Whether you’re looking to monitor environmental conditions, enable presence detection, or control Bluetooth-enabled devices, this approach provides flexibility and scalability.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://exitcode0.net/tags/home-automation/>Home Automation</a></li><li><a href=https://exitcode0.net/tags/home-assistant/>Home Assistant</a></li><li><a href=https://exitcode0.net/tags/esphome/>Esphome</a></li><li><a href=https://exitcode0.net/tags/switchbot/>Switchbot</a></li></ul><nav class=paginav><a class=next href=https://exitcode0.net/posts/sonoff-zbminil2-wiring-guide/><span class=title>Next »</span><br><span>Sonoff ZBMINIL2 Wiring Guide</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://exitcode0.net/>ExitCode0</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>